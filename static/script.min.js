function initPebbleScreens(a){var b="/assets/images/pebble/pebble-time-round-black-20.png",c=function(a,b){return'<div class="'+a.className+'"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" viewBox="0 0 289 390"><image x="54" y="110" width="180" height="180" xlink:href="'+a.src+'" /><image x="0" y="0" width="289" height="390" xlink:href="'+b+'" /></svg></div>'};foreach(a.querySelectorAll(".pebble"),function(a){var d=c(a,b);a.outerHTML=d})}function initPhones(a){var b=function(a){var b=a.className;b=b.replace("phone-screen","phone");var c=a.getAttribute("attr-nav"),d="";return void 0!=c&&(d=' style="background-color:'+c+'"'),a.className="",'<div class="'+b+'"><div class="case"></div>'+a.outerHTML+"<span>"+a.getAttribute("attr-info")+'</span><div class="navbar"'+d+"></div></div>"};foreach(a.querySelectorAll(".phone-screen"),function(a){var c=b(a);a.outerHTML=c})}function initPlayers(a){var b=function(a,b,c){return'<div class="track__cover"><img src="'+a+'"><div class="track__button"></div></div><div class="track__wave"><img src="'+b+'"><div class="track__indicator" style="background-image:url('+c+')"></div></div></div>'};foreach(a.querySelectorAll(".track"),function(a){var c=a.querySelector("audio"),d=c.getAttribute("data-cover"),e=c.getAttribute("data-wave"),f=c.getAttribute("data-wave-played");html=b(d,e,f),a.innerHTML+=html,c.controls=!1;var g=a.querySelector(".track__button"),h=a.querySelector(".track__indicator"),e=a.querySelector(".track__wave");c.addEventListener("timeupdate",function(){var a=this.currentTime/this.duration,b=100-Math.round(1e3*a)/10;h.style.paddingRight=b+"%"}),c.addEventListener("ended",function(){g.classList.remove("playing"),g.classList.add("paused")}),c.style.display="none",g.addEventListener("click",function(){c.paused?(c.play(),this.classList.remove("paused"),this.classList.add("playing")):(c.pause(),this.classList.remove("playing"),this.classList.add("paused"))}),e.addEventListener("click",function(a){var b=e.getClientRects()[0],d=a.pageX-b.left,f=d/b.width;console.log(d,f,f*c.duration),c.pause(),c.currentTime=f*c.duration,c.play()})})}function scroll(a,b,c){var d=16,e=a.scrollTop,f=b-e,g=function(b){b+=d;var h=easeInOut(b,e,f,c);a.scrollTop=h,c>b&&setTimeout(function(){g(b)},d)};g(0)}function easeInOut(a,b,c,d){return a/=d/2,1>a?c/2*a*a+b:(a-=1,-c/2*(a*(a-2)-1)+b)}function foreach(a,b){for(var c=a.length,d=0;c>d&&b(a[d],d,a)!==!1;d++);}function initVideos(a){var b=function(a){return'<div class="video-wrapper paused">'+a.outerHTML+"</div>"};foreach(a.querySelectorAll("article video"),function(a){var c=b(a);a.outerHTML=c}),window.requestAnimationFrame(function(){foreach(a.querySelectorAll(".video-wrapper"),function(a){var b=a.querySelector("video");a.addEventListener("click",function(){a.classList.contains("paused")?(b.play(),a.classList.remove("paused")):(a.classList.add("paused"),b.pause())})})})}var ajax=function(){return{post:function(a,b,c){var d=new XMLHttpRequest;d.addEventListener("load",function(a){b(a.target.responseText)}),d.open("POST",a,!0),c?(d.setRequestHeader("Content-type","application/x-www-form-urlencoded"),d.send(c)):d.send()}}}();window.addEventListener("load",function(){}),function(){function a(){var a=window.scrollY||window.pageYOffset;if(a=a.toFixed(4),h&&(e.style.transform="translate3d(0, "+a/2+"px, 0)"),a>g)d.style.boxShadow="0 0 1em rgba(0,0,0,0.5)",d.style.background="#009688",f.style.opacity="1";else if(a>g/2){var b=(a-g/2)/(g/2);d.style.boxShadow="0 0 1em rgba(0,0,0,"+.5*b+")",d.style.background="rgba(0, 150, 136, "+b+")",f.style.opacity=b}else d.style.boxShadow="0 0 1em rgba(0,0,0,0)",d.style.background="rgba(0, 150, 136, 0)",f.style.opacity=0}var b=document.querySelector("#navigation"),c=document.querySelector(".blocker"),d=document.querySelector("#app-bar"),e=document.querySelector("header"),f=d.querySelector(".title"),g=e.clientTop+e.clientHeight,h=!1,i=0;windowWidth=window.innerWidth;var j=function(){b.classList.add("open"),c.style.display="block",c.style.opacity=0,window.requestAnimationFrame(function(){c.style.opacity=.8})},k=function(){b.classList.remove("open"),c.style.opacity=0,window.setTimeout(function(){c.style.display="none"},500)};window.toggleDrawer=function(a){a?j():k()},window.addEventListener("load",function(){document.querySelector("#app-bar .hamburger").addEventListener("click",function(){j()}),c.addEventListener("click",function(){k()}),h=window.matchMedia("screen and (min-device-width: 800px) and (min-width: 800px)").matches,window.requestAnimationFrame(a)}),window.addEventListener("scroll",function(b){window.requestAnimationFrame(a)}),window.addEventListener("resize",function(){g=e.clientTop+e.clientHeight,windowWidth=window.innerWidth,windowWidth>1263?j():k(),h=window.matchMedia("screen and (min-device-width: 800px) and (min-width: 800px)").matches,h||(e.style.transform="translate3d(0, 0, 0)")}),document.addEventListener("touchstart",function(a){i=a.touches[0].clientX}),c.addEventListener("touchmove",function(a){a.preventDefault(),a.stopPropagation()}),b.addEventListener("touchmove",function(a){a.preventDefault()}),document.addEventListener("touchmove",function(a){var b=a.changedTouches[0].clientX;i-b<-windowWidth/5&&i<windowWidth/5?j():i-b>windowWidth/5&&k()}),windowWidth>1263?j():k()}(),function(){var a=document.querySelector("#content"),b=document.querySelector("#loader"),c=document.querySelector("#app-bar .title"),d=function(d,e,g){a.style.opacity="0",console.log("currentURL:"+location.href,"load:"+d),e&&history.pushState({url:d,scroll:window.scrollY},null,d),setTimeout(function(){b.classList.add("loading"),ajax.post(d,function(d){var h=JSON.parse(d);b.classList.remove("loading"),a.innerHTML=h.html,document.title=h.titleFull,c.innerHTML=h.title,a.style.opacity="1",e&&scroll(document.body,0,300),f(a),initPlayers(a),initVideos(a),initPebbleScreens(a),initPhones(a),g()},"ajax=1")},300)},e=function(a){foreach(a,function(a){"_blank"!=a.target&&a.addEventListener("click",function(b){var c=a.href;return a.href="javascript:",d(c,!0,function(){a.href=c}),toggleDrawer(!1),!1})})},f=function(a){e(a.querySelectorAll("#navigation a")),e(a.querySelectorAll("a.opener")),e(a.querySelectorAll(".tags a")),e(a.querySelectorAll("footer a"))};f(document),window.addEventListener("popstate",function(a){console.log(a),null!=a.state&&"undefined"!=typeof a.state.url?(d(a.state.url,!1),scroll(document.body,a.state.scroll,300)):d(location.href)})}(),function(){initPebbleScreens(document)}(),function(){initPhones(document)}(),function(){initPlayers(document)}(),function(){initVideos(document)}();
